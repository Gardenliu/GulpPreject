<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <meta name="format-detection" content="telephone=no">
    <meta name="keywords" content="大豫网,腾讯大豫网,腾讯?大豫网,腾讯河南频道">
    <meta name="description" content="大豫网,腾讯大豫网,腾讯?大豫网,腾讯河南频道,">
    <title>标题</title>
    <link rel="stylesheet" href="../src/css/common.css?v=1">
    <style>
        .hd{font-size: 1rem;line-height: 2.4rem;padding: .8rem;box-sizing: border-box;padding-bottom:0}
        .hd p{border-bottom: 1px solid #eee}
        .hd p:last-child{border-bottom: none}
    </style>
</head>
<body>
<nav>
    <a href="javascript:history.go(-1)" class="iconfont fl">&#xe603;</a>修改常用就诊人
</nav>
<div class="block"></div>
<div class="block"></div>
<div class="hd border-rad border-line">
    <form action="" id="form">
    <div class="tit form-control">
        <p><span>姓名</span>：<input type="text" name="username" placeholder="请输入真实姓名" value="王某某"></p>
        <p><span>性别</span>：<input type="radio" value="1" name="sex" checked>&nbsp;男&nbsp;&nbsp;&nbsp;<input value="1" type="radio" name="sex">&nbsp;女</p>
        <p><span>身份证号</span>：<input type="text" name="userid" value="123543453434"></p>
        <p><span>出生日期</span>：<input type="date" name="userbirthday" value="2016-01-12"></p>
        <p><span>联系电话</span>：<input type="tel" name="userphone" value="1253443434"></p>
        <p><span>联系地址</span>：<input type="text" name="useraddress" value="中原万达"></p>
    </div>
    <div class="block"></div>
    </form>
</div>
<div class="block"></div>
<div class="block"></div>
<div class="block"></div>
<div class="btn bg-green maincenter" style="color: #fff" id="submit">完成</div>
<div class="block"></div>
<div class="block"></div>
<div class="block"></div>
<div class="block"></div>
<div class="user-footer">
    <span class="fl"><i class="iconfont">&#xe60c;</i>&nbsp;首页</span>
    <span class="fr"><i class="iconfont">&#xe60d;</i>&nbsp;个人中心</span>
</div>
<script src="../src/js/g-alert.js"></script>
<script>
var form=document.getElementById('form'),
    submit=document.getElementById('submit');
submit.addEventListener('click',function(){
    var oData = new FormData(form);
    /*
    * 兼容性：chrome，Firefox，ie9+；
    * 没有对表单做验证，如果需要前端做验证，请及时沟通
    * return object {username:'王某某',sex:'1',userid:'23124'...}
    * */
    var oReq = new XMLHttpRequest();
    oReq.open("POST", "user.php", true);
    oReq.send(oData);
    oReq.onload = function(oEvent) {
        if (this.status == 200) {
            var returnjson=JSON.parse(this.responseText);
            console.log(returnjson);
            /*
             * 自定义alert插件
             * 格式
             * alertTips(
             *    {
             *       state:0,
             *       tit:'标题文字',
             *       btnName:'按钮名称'
             *    }
             * )
             * */
            new alertTips(
                    {state:1,tit:"修改成功",btnName:"确定"}
            );
        } else {
            var tip= "Error " + oReq.status;//返回错误码
            new alertTips(
                    {state:0,tit:"修改失败",btnName:"确定"}
            );
        }
    };

});
</script>
</body>
</html>